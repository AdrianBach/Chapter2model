rm(tab) # no need for tab now
} # end loop over folders
} # end of function
results
# get name
name <- paste("~/", path, folder, "/", results, sep = "")
name
# read table
stats <- read.csv(name)
# get name
name <- paste("~/", folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
View(stats)
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
for (k in 2:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
newHeaders <- headers[0]
for (k in 2:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
colnames(tab) <- newHeaders
headers[1]
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
colnames(tab) <- newHeaders
unique(tab$timeStep)
# read table
stats <- read.csv(name, stringsAsFactors = TRUE)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
colnames(tab) <- newHeaders
unique(tab$timeStep)
# for loop making subset for each time step
TSnb <- unique(as.factor(tab$timeStep))
TSnb
levels(as.factor(tab$timeStep))
as.factor(tab$timeStep)
max(stats$timeStep)
# for loop making subset for each time step
TSnb <- max(stats$timeStep)
seq(0:TSnb)
j = 1
# subset per ts number
sub <- subset(stats$timeStep == ts[j])
ts[j]
# for loop making subset for each time step
ts <- seq(0:max(stats$timeStep))
ts[j]
# subset per ts number
sub <- subset(stats$timeStep == ts[j])
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
View(sub)
dim(stats)[2]-1
# apply stats
for (k in 1:(dim(stats)[2]-1)) {}
results
sim
folder
folder
# get the directory content
content <- list.files(paste("~/", path, sep = ""))
# order alphabetically
content <- content[order(content)]
# only the folders
content <- grep(pattern = c("choosing"), x = content, value = T)
# loop over the folders
for (i in 1:length(content)) {
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# create table
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
colnames(tab) <- newHeaders
# for loop making subset for each time step
ts <- seq(0:max(stats$timeStep))
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- j
# apply stats to each column of measures
for (k in 2:(dim(stats)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k]))
}
# rbind the line to stats
stats <- rbind(stats, newLine)
}
# column names
colnames(stats) <- newHeaders
# write in the corresponding folder
write.csv(stats, file = paste(folder, "/stats", keyword, "-", content[i], sep = ""))
} # end of loop over folders
# get the directory content
content <- list.files(paste("~/", path, sep = ""))
# order alphabetically
content <- content[order(content)]
# only the folders
content <- grep(pattern = c("choosing"), x = content, value = T)
content
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
sim
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0:max(stats$timeStep))
ts
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
ts
j = 2
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- j
# apply stats to each column of measures
for (k in 2:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k]))
}
newLine
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- j
# apply stats to each column of measures
for (k in 2:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k]))
}
# rbind the line to stats
stats <- rbind(stats, newLine)
# reset newLine
newLine <- NULL
}
# column names
colnames(stats) <- newHeaders
headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
newHeaders
newLine
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- j
# apply stats to each column of measures
for (k in 2:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k]))
}
# rbind the line to tab
tab <- rbind(tab, newLine)
# reset newLine
newLine <- NULL
}
# column names
colnames(tab) <- newHeaders
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- j
# apply stats to each column of measures
for (k in 3:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k]))
}
# rbind the line to tab
tab <- rbind(tab, newLine)
# reset newLine
newLine <- NULL
}
# column names
colnames(tab) <- newHeaders
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- j
# apply stats to each column of measures
for (k in 3:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k]))
}
# rbind the line to tab
tab <- rbind(tab, newLine)
# reset newLine
newLine <- NULL
}
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- j
# apply stats to each column of measures
for (k in 3:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k]))
}
# rbind the line to tab
tab <- rbind(tab, newLine)
# reset newLine
sub <- NULL
newLine <- NULL
}
# column names
colnames(tab) <- newHeaders
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- ts[j]
# apply stats to each column of measures
for (k in 3:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k]))
}
# rbind the line to tab
tab <- rbind(tab, newLine)
# reset newLine
sub <- NULL
newLine <- NULL
}
# column names
colnames(tab) <- newHeaders
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- ts[j]
# apply stats to each column of measures
for (k in 3:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k])[2], boot_sd_ci(sub[,k])[3])
}
# rbind the line to tab
tab <- rbind(tab, newLine)
# reset newLine
sub <- NULL
newLine <- NULL
}
# column names
colnames(tab) <- newHeaders
# write in the corresponding folder
write.csv(tab, file = paste(folder, "/stats", keyword, "-", content[i], sep = ""))
# write in the corresponding folder
write.csv(tab, file = paste(folder, "/stats", keyword, "-", content[i], ".csv", sep = ""))
# write in the corresponding folder
write.csv(tab, file = paste(folder, "/stats", keyword, "-", content[i], ".csv", sep = "", row.names = FALSE))
# write in the corresponding folder
write.csv(tab, file = paste(folder, "/stats", keyword, "-", content[i], ".csv", sep = ""), row.names = FALSE)
# get the directory content
content <- list.files(paste("~/", path, sep = ""))
# order alphabetically
content <- content[order(content)]
# only the folders
content <- grep(pattern = c("choosing"), x = content, value = T)
# loop over the folders
for (i in 1:length(content)) {
# path to folder
folder = paste("~/", path, content[i], "/stats-", content[i], sep = "")
# get content
sim = list.files(folder)
# select only csv files
results <- grep(pattern = c("merged"), x = sim, value = T)
# select only results files
results <- grep(pattern = c(keyword), x = results, value = T)
# get name
name <- paste(folder, "/", results, sep = "")
# read table
stats <- read.csv(name)
# create table
# new headers
headers <- colnames(stats)
newHeaders <- headers[2]
for (k in 3:length(headers)) {
newHeaders <- c(newHeaders, paste(headers[k], "Mean", sep = ""), paste(headers[k], "ICinf", sep = ""), paste(headers[k], "ICsup", sep = ""))
}
# create an empty table
tab <- data.frame(matrix(ncol = length(newHeaders), nrow = 0))
# for loop making subset for each time step
ts <- seq(0,max(stats$timeStep))
for (j in 1:length(ts)) {
# subset per ts number
sub <- subset(stats, stats$timeStep == ts[j])
# initiate new line with time step
newLine <- ts[j]
# apply stats to each column of measures
for (k in 3:(dim(sub)[2])) { # first line is ts
newLine <- c(newLine, mean(sub[,k]), boot_sd_ci(sub[,k])[2], boot_sd_ci(sub[,k])[3])
}
# rbind the line to tab
tab <- rbind(tab, newLine)
# reset newLine
sub <- NULL
newLine <- NULL
}
# column names
colnames(tab) <- newHeaders
# write in the corresponding folder
write.csv(tab, file = paste(folder, "/stats", keyword, "-", content[i], ".csv", sep = ""), row.names = FALSE)
rm(tab)
} # end of loop over folders
